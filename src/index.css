:root{
  --space: clamp(0.6rem, 1.6vmin, 1rem);
  --space-lg: clamp(0.9rem, 2.2vmin, 1.4rem);
  --radius: clamp(0.5rem, 1.4vmin, 1rem);
  --radius-lg: clamp(0.8rem, 2vmin, 1.4rem);

  --fs-xs: clamp(0.72rem, 1.2vmin, 0.86rem);
  --fs-sm: clamp(0.86rem, 1.6vmin, 1rem);
  --fs-md: clamp(1rem, 1.9vmin, 1.15rem);
  --fs-lg: clamp(1.12rem, 2.2vmin, 1.35rem);

  --bg: #0b0e13;
  --panel: rgba(18,25,34,0.7);
  --panel-2: rgba(255,255,255,0.08);
  --border: rgba(255,255,255,0.12);
  --text: #e6e8eb;
  --sub: #aab2bf;
  --accent: #e50914;
  --accent-2:#cc0812;
  --shadow: 0 0.25rem 0.7rem rgba(0,0,0,.3);

  --sidebar-w: clamp(18rem, 26vw, 28rem);

  --inset-t: env(safe-area-inset-top);
  --inset-b: env(safe-area-inset-bottom);
  --inset-l: env(safe-area-inset-left);
  --inset-r: env(safe-area-inset-right);
}

*{box-sizing:border-box}
html,body,#root{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family: ui-sans-serif, system-ui, Arial;
  font-size:16px;
}

/* Grid: sidebar overlays; right fills */
.app.desktop{ height:100%; display:grid; grid-template-columns: 1fr; }
.app.compact{ height:100%; display:grid; grid-template-columns: 1fr; }

/* Backdrop when sidebar open (iPad/Desktop) */
.backdrop{
  position: fixed; inset: 0; background: rgba(0,0,0,0);
  backdrop-filter: none; opacity: 0; pointer-events: none;
  transition: opacity .2s ease, backdrop-filter .2s ease; z-index: 240;
}
.backdrop.show{ background: rgba(0,0,0,0.35); backdrop-filter: blur(.4rem); opacity: 1; pointer-events: auto; }

/* Sidebar overlay with macOS-style soft bounce (D1) */
.sidebar-overlay{
  position: fixed; inset-block: 0; inset-inline-start: 0;
  inline-size: min(var(--sidebar-w), 92vw); max-inline-size: 32rem;
  z-index: 250; transform: translateX(-104%); will-change: transform;
}
@keyframes slideBounceIn { 0%{transform:translateX(-104%);} 80%{transform:translateX(-2%);} 100%{transform:translateX(0%);} }
@keyframes slideBounceOut { 0%{transform:translateX(0%);} 100%{transform:translateX(-104%);} }
.sidebar-overlay.open{ animation: slideBounceIn .28s cubic-bezier(0.2, 0.8, 0.4, 1.2) forwards; }
.sidebar-overlay:not(.open){ animation: slideBounceOut .22s ease forwards; }

/* Sidebar block */
.sidebar{
  position:relative; background:var(--panel); backdrop-filter: blur(0.8rem);
  border-right: 0.0625rem solid var(--border); overflow:hidden;
  box-shadow: 0.5rem 0 1.25rem rgba(0,0,0,.35); display:flex; flex-direction:column; block-size:100%;
}

/* Search at top of sidebar */
.sidebar-search{
  padding: var(--space) var(--space); border-bottom: 0.0625rem solid var(--border);
  background: rgba(18,25,34,0.85);
}
.search-input{
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:var(--space);
  inline-size:100%; padding: calc(var(--space)*0.6) var(--space);
  background: rgba(255,255,255,0.08); border: 0.0625rem solid rgba(255,255,255,0.14);
  border-radius: 0.9rem;
}
.search-input input{
  inline-size:100%; border:none; outline:none; background:transparent; color:var(--text); font-size: var(--fs-md);
}
.loupe{ opacity:.9; }
.clear{ background:transparent; border:none; color:var(--text); font-size:var(--fs-md); opacity:.7; cursor:pointer; }
.clear:hover{ opacity:1; }

.sidebar-body{ height:100%; overflow:auto; padding: var(--space); }

/* Sections / rows */
.section{ margin-bottom:var(--space); border:0.0625rem solid var(--border); border-radius: calc(var(--radius)*1.4); background: rgba(0,0,0,.2); overflow:hidden; }
.section-hd{ padding:var(--space); display:flex; align-items:center; justify-content:space-between; background: rgba(18,25,34,.9); border-bottom: 0.0625rem solid var(--border); font-weight:700; font-size: var(--fs-sm); text-transform:uppercase; color:var(--sub); }
.section-bd{ padding: calc(var(--space)*0.6); }
.row{ display:flex; align-items:center; justify-content:space-between; padding: calc(var(--space)*0.7) var(--space); border-radius: var(--radius); border: 0.0625rem solid transparent; cursor:pointer; margin-bottom: 0.25rem; outline: none; }
.row:hover{ background: rgba(255,255,255,.06); }
.row.active{ border-color: var(--accent); background: rgba(229,9,20,.12); }
.row:focus{ box-shadow: 0 0 0 0.125rem var(--accent); }
.left{ display:flex; align-items:center; gap: var(--space); }
.logo{ inline-size:1.25rem; block-size:1.25rem; border-radius:0.25rem; border:0.0625rem solid var(--border); background:#11151f; flex-shrink:0; }
.title{ font-weight:500; font-size: var(--fs-sm); line-height:1.2; }
.meta{ font-size: var(--fs-xs); color:var(--sub); line-height:1.2; }
.favbtn{ background:transparent; border:none; font-size: var(--fs-md); padding:0; opacity:.8; }
.favbtn:hover{ opacity:1; }
.playbtn{ background: var(--accent); border:none; color:#fff; padding: calc(var(--space)*0.5) var(--space); border-radius: calc(var(--radius)*1.4); font-weight:700; font-size: var(--fs-sm); box-shadow: 0 0.125rem 0.375rem rgba(229,9,20,.4); }
.playbtn:hover{ background: var(--accent-2); }

/* Right/content */
.right{ display:flex; flex-direction:column; height:100%; }
.right-hd{
  min-height: 3.2rem; display:flex; align-items:center; gap: var(--space);
  padding: var(--space-lg); border-bottom: 0.0625rem solid var(--border);
  background: rgba(18,25,34,.7); backdrop-filter: blur(0.5rem);
  white-space:nowrap; overflow:hidden;
}
.hdr-toggle{ margin-inline-end: var(--space); } /* â˜° at left */
.right-title{ font-weight:700; font-size: var(--fs-md); }
.right-sub{ color:var(--sub); font-size: var(--fs-xs); margin-inline-start: auto; }

/* Player */
.player-wrap{ position:relative; background:#000; display:flex; align-items:center; justify-content:center; flex:1; padding: var(--space-lg); }
.video{ width:min(100%,160vh); height:auto; aspect-ratio:16/9; background:#000; border-radius: calc(var(--radius)*1.8); box-shadow: var(--shadow); }
.empty-state{ color:var(--sub); padding: var(--space-lg); font-size: var(--fs-md); }

/* Controls */
.controls{
  display:flex; align-items:center; gap: var(--space);
  padding: var(--space-lg); padding-bottom: calc(var(--space-lg) + var(--inset-b));
  border-top: 0.0625rem solid var(--border); background: rgba(18,25,34,.7); backdrop-filter: blur(0.5rem);
}
.btn, .iconbtn, .favbtn{
  appearance:none; border:0.0625rem solid var(--border); background:var(--panel-2);
  color:var(--text); border-radius: var(--radius); padding: calc(var(--space)*0.6) var(--space);
  cursor:pointer; transition: background .12s ease; white-space:nowrap; font-size: var(--fs-sm);
}
.btn:hover, .iconbtn:hover{ background: rgba(255,255,255,.15); }
.spacer{ flex:1; }

/* ---------- Phones: bottom sheet ---------- */
.app.compact .right-hd .right-sub{ display:none; }
.sheet{ position: fixed; inset: 0; display: none; background: rgba(0,0,0,0.25); z-index: 220; }
.sheet.open{ display: block; }
.sheet-wrap{
  position: absolute; inset-inline: 0; inset-block-end: 0;
  inline-size: 100%; block-size: min(88vh, 44rem);
  background: rgba(12,18,27,0.92); backdrop-filter: blur(0.9rem);
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  transform: translateY(100%); transition: transform .26s ease-out;
  padding-bottom: calc(var(--inset-b) + var(--space));
}
.sheet.open .sheet-wrap{ transform: translateY(0); }
.sheet-hd{ display:flex; align-items:center; justify-content:space-between; padding: var(--space-lg) var(--space-lg) var(--space); border-bottom: 0.0625rem solid var(--border); }
.sheet-hd .title{ font-weight:700; font-size: var(--fs-md); }
.sheet-bd{ padding: var(--space); display:flex; flex-direction:column; gap: var(--space); }
.sheet-search{ padding: 0; }
.tabs{ display:flex; gap: var(--space); }
.tab{ flex:1; text-align:center; padding: calc(var(--space)*0.6); border-radius: var(--radius); border: 0.0625rem solid var(--border); background: var(--panel-2); color: var(--text); font-size: var(--fs-sm); }
.tab.active{ background: rgba(229,9,20,.18); border-color: var(--accent); }
.panel{ min-height: 40vh; overflow:auto; border-radius: var(--radius); }
.list{ display:block; }

/* TVs */
@media (min-width: 90rem) and (min-height: 56rem){
  .title{ font-size: var(--fs-md); }
  .right-title{ font-size: var(--fs-lg); }
}
